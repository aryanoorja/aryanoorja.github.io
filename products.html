<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oorja Threads - Bracelets</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Montserrat', sans-serif; }
    body { background: #0d0d0d; color: #fff; overflow-x: hidden; }
    .topbar { width: 100%; background: #111; padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #222; position: fixed; top: 0; left: 0; z-index: 1100; }
    .brand { font-size: 1.4rem; font-weight: 700; color: #ff3c38; }
    .menu-toggle { display: none; cursor: pointer; flex-direction: column; gap: 4px; z-index: 1200; }
    .menu-toggle div { width: 25px; height: 3px; background-color: white; }
    .sidebar { position: fixed; top: 60px; left: 0; height: calc(100% - 60px); width: 220px; background: #111; padding: 40px 20px; display: flex; flex-direction: column; gap: 20px; border-right: 1px solid #222; z-index: 1000; transition: transform 0.3s; }
    .sidebar a { color: #ddd; text-decoration: none; font-weight: 600; transition: 0.3s; }
    .sidebar a:hover { color: #ff3c38; }
    main { margin-left: 240px; padding: 100px 20px 40px; }
    .product-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
    .product-card { background: #181818; border-radius: 10px; overflow: hidden; display: flex; flex-direction: column; justify-content: space-between; }
    .product-card img { width: 100%; height: 240px; object-fit: cover; }
    .product-details { padding: 15px; display: flex; flex-direction: column; gap: 10px; }
    .product-details h3 { font-size: 1.4rem; }
    .product-details p { color: #ff3c38; font-weight: 600; }
    .product-details button { padding: 12px; border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer; }
    .buy { background: #ff3c38; color: white; }
    .cart { background: #fff; color: #111; }
    .cart-icon { cursor: pointer; position: relative; font-size: 2.3rem; margin-right: 25px; }
    .cart-count { position: absolute; top: -8px; right: -10px; background: red; color: white; font-size: 0.8rem; padding: 2px 6px; border-radius: 50%; }
    .cart-modal { display: none; position: fixed; top: 0; left: 0; height: 100%; width: 100%; background: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; z-index: 9999; }
    .cart-modal-content { background: #111; padding: 30px; border-radius: 12px; width: 90%; max-width: 600px; position: relative; text-align: center; }
    .close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; background: none; color: white; border: none; cursor: pointer; }
    .cart-item { display: flex; align-items: center; justify-content: space-between; margin: 10px 0; padding: 10px; background: #222; border-radius: 8px; }
    .cart-item img { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; margin-right: 10px; }
    .cart-item-details { flex-grow: 1; display: flex; justify-content: space-between; align-items: center; }
    .cart-item-name { flex-grow: 1; }
    .cart-controls { display: flex; align-items: center; gap: 5px; }
    .cart-controls button { background: #333; color: white; border: none; padding: 4px 10px; border-radius: 6px; cursor: pointer; }
    .cart-price { min-width: 80px; text-align: right; }
    .big-button { background: #ff3c38; color: white; padding: 14px; font-size: 1.1rem; border: none; border-radius: 10px; cursor: pointer; margin-top: 15px; width: 100%; }
    #cart-popup { position: fixed; bottom: 30px; right: 30px; background: #222; color: #fff; padding: 12px 20px; border-radius: 8px; display: none; z-index: 10000; }
    @media (max-width: 768px) {
      .sidebar { transform: translateX(-100%); }
      .sidebar.active { transform: translateX(0); }
      .menu-toggle { display: flex; position: absolute; top: 18px; right: 20px; }
      .topbar { justify-content: space-between; }
      main { margin-left: 0; padding: 120px 20px 40px; }
      .product-list { grid-template-columns: 1fr; }
      .product-card img { height: 220px; }
    }
    .left-topbar { display: flex; align-items: center; gap: 12px; }
    .logo { width: 32px; height: 28px; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="left-topbar">
      <img src="logo.png" alt="Logo" class="logo">
      <div class="brand">Oorja Threads</div>
      <div class="menu-toggle" onclick="document.getElementById('sidebar').classList.toggle('active')">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="cart-icon" onclick="openCart()">ðŸ›’ <span class="cart-count" id="cart-count">0</span></div>
  </div>

  <nav class="sidebar" id="sidebar">
    <a href="index.html">Home</a>
    <a href="products.html" class="active">Bracelets</a>
    <a href="about.html">About Us</a>
    <a href="terms.html">Terms & Conditions</a>
    <a href="contact.html">Contact Us</a>
  </nav>

  <main>
    <h1 style="text-align:center; font-size:2.5rem; margin-bottom:40px;">Our Bracelets</h1>
    <div class="product-list" id="product-list"></div>
  </main>

  <div class="cart-modal" id="cartModal">
    <div class="cart-modal-content">
      <button class="close-btn" onclick="closeModal('cartModal')">Ã—</button>
      <h2>Your Cart</h2>
      <div id="cart-items"></div>
      <p id="cart-total"></p>
      <button class="big-button" onclick="proceedToPay()">Checkout</button>
    </div>
  </div>

  <div id="cart-popup"></div>

  <script>
    const products = [
      { name: "Moon Pearl Bracelet", price: 39, image: "moon.png" },
      { name: "Crimson Pearl Bracelet", price: 25, image: "crimson.png" },
      { name: "Moss Pearl Bracelet", price: 25, image: "moss.png" },
      { name: "Rose Pearl Bracelet", price: 25, image: "rose.png" },
      { name: "Blaze Pearl Bracelet", price: 25, image: "blaze.png" },
      { name: "Aqua Pearl Bracelet", price: 25, image: "aqua.png" },
      { name: "Frost Pearl Bracelet", price: 25, image: "frost.png" },
      { name: "Cotton Pearl Bracelet", price: 25, image: "cotton.png" },
      { name: "Lavender Pearl Bracelet", price: 25, image: "lavender.png" }
    ];

    const cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCart() {
      const cartItems = document.getElementById("cart-items");
      const cartTotal = document.getElementById("cart-total");
      cartItems.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price * item.qty;
        cartItems.innerHTML += `
          <div class="cart-item">
            <img src="${item.image}" alt="${item.name}">
            <div class="cart-item-details">
              <span class="cart-item-name">${item.name}</span>
              <div class="cart-controls">
                <button onclick="changeQty(${index}, -1)">-</button>
                <span>${item.qty}</span>
                <button onclick="changeQty(${index}, 1)">+</button>
              </div>
              <span class="cart-price">â‚¹${(item.price * item.qty) / 100}</span>
            </div>
          </div>
        `;
      });
      cartTotal.innerText = total ? `Total: â‚¹${total / 100}` : '';
      document.getElementById("cart-count").innerText = cart.reduce((a, b) => a + b.qty, 0);
      localStorage.setItem("cart", JSON.stringify(cart)); // Save cart to localStorage
    }

    function addToCart(product) {
      const index = cart.findIndex(p => p.name === product.name);
      if (index > -1) cart[index].qty++;
      else cart.push({ ...product, qty: 1 });
      updateCart();
      showPopup(`${product.name} added to cart!`);
    }

    function showPopup(message) {
      const popup = document.getElementById("cart-popup");
      popup.innerText = message;
      popup.style.display = "block";
      setTimeout(() => popup.style.display = "none", 2000);
    }

    function changeQty(index, amount) {
      cart[index].qty += amount;
      if (cart[index].qty <= 0) cart.splice(index, 1);
      updateCart();
    }

    function openCart() {
      updateCart();
      document.getElementById("cartModal").style.display = "flex";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    function proceedToPay() {
      const totalAmount = cart.reduce((acc, item) => acc + item.price * item.qty, 0);
      if (!totalAmount) return alert("Cart is empty!");
      const options = {
        key: "keyyyyyyyyyyyyyyyyyy",
        amount: totalAmount,
        currency: "INR",
        name: "Oorja Threads",
        description: "Bracelet Order",
        image: "logo.png",
        handler: function (response) {
          alert("Payment successful! ID: " + response.razorpay_payment_id);
          cart.length = 0;
          localStorage.removeItem("cart"); // Clear cart from localStorage
          updateCart();
          closeModal('cartModal');
        },
        prefill: { name: "", email: "", contact: "" },
        theme: { color: "#ff3c38" }
      };
      const rzp = new Razorpay(options);
      rzp.open();
    }

    const productList = document.getElementById("product-list");
    products.forEach(product => {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${product.image}" alt="${product.name}">
        <div class="product-details">
          <h3>${product.name}</h3>
          <p>Price: â‚¹${product.price / 100}</p>
          <button class="buy" onclick='proceedToPay();'>Buy Now</button>
          <button class="cart" onclick='addToCart(${JSON.stringify(product)})'>Add to Cart</button>
        </div>
      `;
      productList.appendChild(card);
    });

    // Load cart from localStorage when the page loads
    document.addEventListener("DOMContentLoaded", () => {
      updateCart();
    });
  </script>
</body>
</html>
